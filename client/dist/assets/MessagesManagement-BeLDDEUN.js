import{r as d,ax as n,ac as i,j as a,al as l,ad as h,B as c,S as p,$ as f}from"./index-nQwRLWIV.js";import{s as g}from"./index-CuMLlqtw.js";import{A as u}from"./AdminLayout-DfXFzIWd.js";import{R as w}from"./RenderAttachment-DlHa5bJt.js";import{T as x}from"./Table-CgmuquRb.js";import{a as A}from"./hook-CbcOqQDK.js";import{A as N}from"./Avatar-Cp_pS6TR.js";import"./Menu-BQtQEp1m.js";import"./Drawer-CrhtyCwH.js";import"./Container-pKhpZPRr.js";import"./createStyled-_vrQOoQc.js";import"./Select-CNHqHSZW.js";import"./Chip-DmxrvcVU.js";import"./ListItemText-D4lQFR75.js";import"./TextField-DRpVSgRA.js";import"./Button-CDrbuMrr.js";import"./InputAdornment-BVIphoD5.js";import"./CircularProgress-B9RjoFSh.js";const j=[{field:"attachments",headerName:"Attachments",headerClassName:"table-header",width:200,renderCell:r=>{const{attachments:e}=r.row;return(e==null?void 0:e.length)>0?e.map((o,m)=>{const s=o.url,t=h(s);return a.jsx(c,{children:a.jsx("a",{href:s,download:!0,target:"_blank",style:{color:"black"},children:w(t,s)})},m)}):"No Attachments"}},{field:"content",headerName:"Content",headerClassName:"table-header",width:400},{field:"sender",headerName:"Sent By",headerClassName:"table-header",width:200,renderCell:r=>a.jsxs(p,{direction:"row",spacing:"1rem",alignItems:"center",children:[a.jsx(N,{alt:r.row.sender.name,src:r.row.sender.avatar}),a.jsx("span",{children:r.row.sender.name})]})},{field:"groupChat",headerName:"Group Chat",headerClassName:"table-header",width:100},{field:"createdAt",headerName:"Time",headerClassName:"table-header",width:250}],H=()=>{const{loading:r,data:e,error:o}=g(`${f}/api/v1/admin/messages`);A([{isError:o,error:o}]);const[m,s]=d.useState([]);return d.useEffect(()=>{e&&s(e.messages.map(t=>({...t,id:t._id,sender:{name:t.sender.name,avatar:n(t.sender.avatar,50)},createdAt:i(t.createdAt).format("MMMM Do YYYY, h:mm:ss a")})))},[e]),a.jsx(u,{children:r?a.jsx(l,{height:"100vh"}):a.jsx(x,{heading:"All Messages",columns:j,rows:m,rowHeight:200})})};export{H as default};
