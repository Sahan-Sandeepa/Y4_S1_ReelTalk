import{a3 as A,a4 as I,j as e,a5 as C,S as N,bL as S,bM as D,V as i,aa as q,I as _,an as T,T as w,r as v,P as l,bN as F,a_ as O}from"./index-BanVTlhg.js";import{b as L,a as M}from"./hook-DVnn475D.js";import{D as B}from"./dialogTitleClasses-CAlvBSfc.js";import{D as E}from"./DialogTitle-Dn6jQz4K.js";import{L as P}from"./ListItem-CRCg59Gd.js";import{A as H}from"./Avatar-D1EpHAeu.js";import{B as k}from"./Button-2cdgf7kG.js";var R={},W=I;Object.defineProperty(R,"__esModule",{value:!0});var b=R.default=void 0,z=W(A()),G=e;b=R.default=(0,z.default)((0,G.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");const Y=()=>{var f;const{isNotification:m}=C(s=>s.misc),h=N(),{user:n}=C(s=>s.auth),[x]=S(),{isLoading:d,data:t,error:o,isError:u}=D(),[j]=L(F),a=()=>h(O(!1));M([{error:o,isError:u}]);const p=async({_id:s,accept:r,groupName:c})=>{await j("Processing...",{requestId:s,accept:r}),x({receiverId:n._id,receiverName:n.name,age:n.age,isAccepted:r,groupName:c}),a()},g=async s=>{if(t&&t.allRequests){for(const{_id:r,groupName:c}of t.allRequests)await p({_id:r,accept:s,groupName:c});a()}};return e.jsx(B,{open:m,onClose:a,children:e.jsxs(i,{p:{xs:"1rem",sm:"2rem"},maxWidth:"25rem",children:[e.jsxs(i,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(E,{children:"Notifications"}),e.jsx(i,{direction:"row",spacing:2,children:e.jsx(q,{title:"Accept All",arrow:!0,children:e.jsx(_,{color:"primary",onClick:()=>g(!0),children:e.jsx(b,{})})})})]}),d?e.jsx(T,{}):e.jsx(e.Fragment,{children:((f=t==null?void 0:t.allRequests)==null?void 0:f.length)>0?e.jsx(e.Fragment,{children:t.allRequests.map(({sender:s,_id:r,groupName:c})=>e.jsx(y,{sender:s,_id:r,groupName:c,handler:p},r))}):e.jsx(w,{textAlign:"center",children:"0 notifications"})})]})})},y=v.memo(({sender:m,_id:h,groupName:n,handler:x})=>{const{name:d,avatar:t}=m,[o,u]=v.useState(null),[j,a]=v.useState(!1),p=async f=>{await x({_id:h,accept:f,groupName:n}),u("Accepted"),a(!0)},g=()=>{u(null),a(!1)};return e.jsx(P,{children:e.jsxs(i,{direction:"row",alignItems:"center",spacing:"1rem",width:"100%",children:[e.jsx(H,{src:t}),e.jsx(w,{variant:"body1",sx:{flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"300px",whiteSpace:"nowrap"},children:e.jsx(q,{title:`${d} added you as a friend.`,arrow:!0,children:e.jsx("span",{children:`${d} added you as a friend.`})})}),o?e.jsxs(i,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(w,{variant:"body2",color:o==="Accepted"?"green":"red",children:o}),j&&e.jsx(k,{variant:"contained",size:"small",onClick:g,sx:{backgroundColor:"#6C63FF",color:"#fff"},children:"OK"})]}):e.jsx(i,{direction:"row",spacing:1,width:"100%",justifyContent:"space-between",children:e.jsx(k,{fullWidth:!0,variant:"outlined",sx:{borderRadius:"8px",backgroundColor:"#6C63FF",color:"#fff","&:hover":{backgroundColor:"#5348C7"}},onClick:()=>p(!0),children:"Ok"})})]})})});y.displayName="NotificationItem";y.propTypes={sender:l.shape({name:l.string.isRequired,avatar:l.string.isRequired}).isRequired,_id:l.string.isRequired,handler:l.func.isRequired};export{Y as default};
